/// Generate base icon class
///
/// @private
@mixin _oFtIconsStyles() {
	.o-ft-icon {
		@include oFtIconsIconStyles();
	}
}

/// Generate icon size variation classes
///
/// @private
@mixin _oFtIconsSizes() {
	@each $key, $value in $o-ft-icons-icon-sizes {
		.o-ft-icon--#{$key} {
			@include oFtIconsIconSize($value);
		}
	}
}

/// Generate icon color variation classes
///
/// @private
@mixin _oFtIconsColors() {
	@each $color-name, $color-code in $o-ft-icons-icon-colors {
		.o-ft-icon--#{$color-name} {
			@include oFtIconsIconColor($color-name);
		}
	}
}

/// Generate icon name variation classes
///
/// @private
@mixin _oFtIconsNames() {
	@each $icon-name in $o-ft-icons-icon-names {
		.o-ft-icon--#{$icon-name} {
			@include oFtIconsIconName($icon-name);
		}
	}
}

/// Base icon styles
///
/// @example scss
///  @include oFtIconsIconStyles();
@mixin oFtIconsIconStyles() {
	position: relative;
	display: inline-block;
	overflow: hidden;

	// Create a canvas for the background because background-position X/Y
	// cannot be manipulated individually but position top/left can.
	&:after {
		content: '';
		position: absolute;
		width: percentage(length($o-ft-icons-icon-colors));
		height: percentage(length($o-ft-icons-icon-names));
		// Android 2.x doesn't support SVG but does support background-size...
		background-image: url('#{_oFtIconsImageUrl()}.png');
		// However, it will try to download the SVG so multibackgrounds FTW.
		background-image: linear-gradient(transparent, transparent), url('#{_oFtIconsImageUrl()}.svg');
		background-repeat: no-repeat;
		background-size: 100%;
	}
}

/// Specify icon size
///
/// @example scss
///  @include oFtIconsIconSize(32);
///
/// @param {Number|String} $icon-size - Icon size in px or keyword
@mixin oFtIconsIconSize($icon-size) {
	@if (type-of($icon-size) == 'string') {
		$icon-size: map-get($o-ft-icons-icon-sizes, $icon-size);
	}
	@if ($icon-size == null) {
		@error "Size is not configured.";
	}

	width: $icon-size + 0px;
	height: $icon-size + 0px;

	&:after {
		// Old IE fallback uses zoom to scale icon size.
		// Other browsers have implemented zoom so it needs scoping to IE only.
		// <http://keithclark.co.uk/articles/moving-ie-specific-css-into-media-blocks/>
		@media \0screen\,screen\9 {
			zoom: _oFtIconsIeZoomLevel($icon-size);
		}
	}
}

/// Specify icon colour
///
/// @example scss
///  @include oFtIconsIconColor('blue');
///
/// @param {String} $color-name - Name of colour in palette
@mixin oFtIconsIconColor($color-name) {
	&:after {
		left: _oFtIconsImagePositionX($color-name);
		// % based sizes are calculated against original element size, not the
		// parent or scaled size in IE.
		@media \0screen\,screen\9 {
			left: _oFtIconsImagePositionX($color-name, $ie-fallback: true);
		}
	}
}

/// Specify icon name
///
/// @example scss
///  @include oFtIconsIconName('hamburger');
///
/// @param {String} $icon-name - Name of icon
@mixin oFtIconsIconName($icon-name) {
	&:after {
		top: _oFtIconsImagePositionY($icon-name);
		// % based sizes are calculated against original element size, not the
		// parent or scaled size in IE.
		@media \0screen\,screen\9 {
			top: _oFtIconsImagePositionY($icon-name, $ie-fallback: true);
		}
	}
}

/// Add an icon specifying size, colour and name.
///
/// @example scss
///  @include oFtIconsIcon(32, 'blue', 'hamburger');
///  @include oFtIconsIcon('s', 'blue', 'hamburger');
///
/// @param {Number|String} $icon-size - Icon size in px or keyword
/// @param {String} $color-name - Name of colour in palette
/// @param {String} $icon-name - Name of icon
@mixin oFtIconsIcon($icon-size, $color-name, $icon-name) {
	@include oFtIconsIconStyles();
	@include oFtIconsIconSize($icon-size);
	@include oFtIconsIconColor($color-name);
	@include oFtIconsIconName($icon-name);
}
